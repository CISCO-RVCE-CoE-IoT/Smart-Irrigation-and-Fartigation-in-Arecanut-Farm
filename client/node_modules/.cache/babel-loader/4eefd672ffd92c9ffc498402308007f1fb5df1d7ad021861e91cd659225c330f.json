{"ast":null,"code":"var _jsxFileName = \"/home/mcalab3/Desktop/contributor/Smart-Irrigation-and-Fartigation-in-Arecanut-Farm/client/src/pages/User/Components/Farmer/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport L from \"leaflet\";\nimport campass from '../Images/campass.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Map = ({\n  data\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const [legendItems, setLegendItems] = useState([]);\n  useEffect(() => {\n    if (mapRef.current) {\n      const map = L.map(mapRef.current).setView([16.22525, 74.8424], 25);\n      L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n        maxZoom: 26,\n        minZoom: 2\n      }).addTo(map);\n\n      // Color mappings\n      const colorMap = {\n        farmland: \"green\",\n        valve: \"orange\",\n        moisture: \"blue\",\n        npk: \"red\"\n      };\n\n      // Handle farmland polygon\n      const farmlandCoordinates = data.farmlocation.farm_loc.map(loc => {\n        const [lat, lon] = loc.split(\",\").map(Number);\n        return [lat, lon];\n      });\n      const farmlandLayer = L.polygon(farmlandCoordinates, {\n        color: colorMap.farmland\n      }).addTo(map);\n      farmlandLayer.bindPopup(\"Farmland Area\");\n\n      // Fit map to the farmland bounds\n      const farmlandBounds = L.latLngBounds(farmlandCoordinates);\n      map.fitBounds(farmlandBounds);\n\n      // Unique types for legend\n      const uniqueTypes = new Set();\n\n      // Handle sensor locations\n      data.sensorlocation.forEach(sensor => {\n        uniqueTypes.add(sensor.device_name);\n        const [lat, lon] = sensor.device_location.split(\",\").map(Number);\n        const color = colorMap[sensor.device_name] || \"gray\";\n        L.circleMarker([lat, lon], {\n          radius: sensor.device_name === \"moisture\" ? 5 : 8,\n          fillColor: color,\n          color: \"black\",\n          fillOpacity: 1,\n          stroke: sensor.device_name === \"moisture\" ? false : true\n        }).addTo(map).bindPopup(`${sensor.device_name}: ${sensor.section_id}`);\n      });\n\n      // Handle farm device locations\n      data.farmdevicelocation.forEach(device => {\n        uniqueTypes.add(device.device_name);\n        const [lat, lon] = device.device_location.split(\",\").map(Number);\n        const color = colorMap[device.device_name] || \"gray\";\n        L.circleMarker([lat, lon], {\n          radius: 6,\n          fillColor: color,\n          color: color,\n          fillOpacity: 1,\n          weight: 1\n        }).addTo(map).bindPopup(`${device.device_name}: ${device.farm_device_id}`);\n      });\n\n      // Legend items\n      const legendData = Array.from(uniqueTypes).map(type => ({\n        type,\n        color: colorMap[type] || \"gray\"\n      }));\n      setLegendItems(legendData);\n\n      // Cleanup on unmount\n      return () => {\n        map.remove();\n      };\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\",\n      overflow: 'hidden'\n    },\n    className: \"borderring\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        width: \"100%\",\n        height: \"445px\",\n        scale: \"1.40\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        top: \"10px\",\n        right: \"10px\",\n        backgroundColor: \"white\",\n        padding: \"6px\",\n        borderRadius: \"5px\",\n        boxShadow: \"0 0 5px rgba(0,0,0,0.5)\",\n        zIndex: 10\n      },\n      children: [legendItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"10px\",\n            height: \"10px\",\n            backgroundColor: item.color,\n            marginRight: \"5px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '13px'\n          },\n          children: item.type.charAt(0).toUpperCase() + item.type.slice(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this)]\n      }, item.type, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: campass,\n        width: 30\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n_s(Map, \"5rTJLjj8uCt4A74gnoRlyaXVi0Y=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","useState","L","campass","jsxDEV","_jsxDEV","Map","data","_s","mapRef","legendItems","setLegendItems","current","map","setView","tileLayer","maxZoom","minZoom","addTo","colorMap","farmland","valve","moisture","npk","farmlandCoordinates","farmlocation","farm_loc","loc","lat","lon","split","Number","farmlandLayer","polygon","color","bindPopup","farmlandBounds","latLngBounds","fitBounds","uniqueTypes","Set","sensorlocation","forEach","sensor","add","device_name","device_location","circleMarker","radius","fillColor","fillOpacity","stroke","section_id","farmdevicelocation","device","weight","farm_device_id","legendData","Array","from","type","remove","style","position","overflow","className","children","ref","width","height","scale","fileName","_jsxFileName","lineNumber","columnNumber","top","right","backgroundColor","padding","borderRadius","boxShadow","zIndex","item","display","alignItems","marginRight","fontSize","charAt","toUpperCase","slice","src","_c","$RefreshReg$"],"sources":["/home/mcalab3/Desktop/contributor/Smart-Irrigation-and-Fartigation-in-Arecanut-Farm/client/src/pages/User/Components/Farmer/Map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport L from \"leaflet\";\nimport campass from '../Images/campass.png'\n\nconst Map = ({ data }) => {\n    const mapRef = useRef(null);\n    const [legendItems, setLegendItems] = useState([]);\n\n    useEffect(() => {\n        if (mapRef.current) {\n            const map = L.map(mapRef.current).setView([16.22525, 74.8424], 25);\n\n            L.tileLayer(\n                \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n                {\n                    maxZoom: 26,\n                    minZoom: 2,\n                }\n            ).addTo(map);\n\n            // Color mappings\n            const colorMap = {\n                farmland: \"green\",\n                valve: \"orange\",\n                moisture: \"blue\",\n                npk: \"red\",\n            };\n\n            // Handle farmland polygon\n            const farmlandCoordinates = data.farmlocation.farm_loc.map((loc) => {\n                const [lat, lon] = loc.split(\",\").map(Number);\n                return [lat, lon];\n            });\n            const farmlandLayer = L.polygon(farmlandCoordinates, {\n                color: colorMap.farmland,\n            }).addTo(map);\n            farmlandLayer.bindPopup(\"Farmland Area\");\n\n            // Fit map to the farmland bounds\n            const farmlandBounds = L.latLngBounds(farmlandCoordinates);\n            map.fitBounds(farmlandBounds);\n\n            // Unique types for legend\n            const uniqueTypes = new Set();\n\n            // Handle sensor locations\n            data.sensorlocation.forEach((sensor) => {\n                uniqueTypes.add(sensor.device_name);\n                const [lat, lon] = sensor.device_location.split(\",\").map(Number);\n                const color = colorMap[sensor.device_name] || \"gray\";\n\n                L.circleMarker([lat, lon], {\n                    radius: sensor.device_name === \"moisture\" ? 5 : 8,\n                    fillColor: color,\n                    color: \"black\",\n                    fillOpacity: 1,\n                    stroke: sensor.device_name === \"moisture\" ? false : true,\n                }).addTo(map).bindPopup(`${sensor.device_name}: ${sensor.section_id}`);\n            });\n\n            // Handle farm device locations\n            data.farmdevicelocation.forEach((device) => {\n                uniqueTypes.add(device.device_name);\n                const [lat, lon] = device.device_location.split(\",\").map(Number);\n                const color = colorMap[device.device_name] || \"gray\";\n\n                L.circleMarker([lat, lon], {\n                    radius: 6,\n                    fillColor: color,\n                    color: color,\n                    fillOpacity: 1,\n                    weight: 1,\n                }).addTo(map).bindPopup(`${device.device_name}: ${device.farm_device_id}`);\n            });\n\n            // Legend items\n            const legendData = Array.from(uniqueTypes).map((type) => ({\n                type,\n                color: colorMap[type] || \"gray\",\n            }));\n            setLegendItems(legendData);\n\n            // Cleanup on unmount\n            return () => {\n                map.remove();\n            };\n        }\n    }, [data]);\n\n    return (\n        <div style={{ position: \"relative\" ,overflow:'hidden'}} className=\"borderring\">\n            <div ref={mapRef} style={{ width: \"100%\", height: \"445px\", scale: \"1.40\" }}></div>\n            <div style={{\n                position: \"absolute\",\n                top: \"10px\",\n                right: \"10px\",\n                backgroundColor: \"white\",\n                padding: \"6px\",\n                borderRadius: \"5px\",\n                boxShadow: \"0 0 5px rgba(0,0,0,0.5)\",\n                zIndex: 10,\n            }}>\n                {legendItems.map((item) => (\n                    <div key={item.type} style={{ display: \"flex\", alignItems: \"center\" }}>\n                        <div style={{ width: \"10px\", height: \"10px\", backgroundColor: item.color, marginRight: \"5px\" }}></div>\n                        <span style={{ fontSize: '13px' }}>{item.type.charAt(0).toUpperCase() + item.type.slice(1)}</span>\n                    </div>\n                ))}\n                <img src={campass} width={30}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Map;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}